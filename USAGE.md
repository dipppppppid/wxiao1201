# 虚拟人语音互动系统 - 使用说明

## 语音交互功能

### 如何使用

1. **授权麦克风权限**
   - 首次使用时,浏览器会请求麦克风权限
   - 请点击"允许"以启用语音功能
   - 如果误点了"拒绝",请在浏览器设置中重新授权

2. **录音操作**
   - 点击并按住蓝色麦克风按钮开始录音
   - 录音时会显示实时时长(例如"正在聆听... 2s")
   - **请至少录制1-2秒**,太短的录音可能无法识别
   - 松开按钮停止录音并自动发送

3. **唤醒虚拟人**
   - 说出唤醒词"小卫小卫"来激活虚拟人
   - 唤醒成功后,虚拟人会回复欢迎语
   - 状态会从"待机中"变为"已唤醒"

4. **对话交流**
   - 唤醒后可以直接提问
   - 系统会展示5步推理过程:
     - 语音转文字
     - 语义解析
     - 知识库检索
     - 逻辑推理
     - 生成回答
   - 对话历史会显示在右侧面板

### 常见问题

**Q: 提示"录音时间太短"怎么办?**
A: 请确保按住麦克风按钮至少1-2秒再松开。

**Q: 提示"无法访问麦克风"怎么办?**
A: 
1. 检查浏览器是否有麦克风权限
2. 检查系统是否允许浏览器访问麦克风
3. 尝试刷新页面重新授权

**Q: 语音识别不准确怎么办?**
A:
1. 确保环境安静,减少背景噪音
2. 说话清晰,语速适中
3. 尽量靠近麦克风

**Q: 提示"Speech to text failed"怎么办?**
A:
1. 检查网络连接是否正常
2. 确保录音时长足够(至少1秒)
3. 尝试重新录制

### 知识库管理

1. 点击右上角"知识库管理"按钮
2. 上传PDF、DOCX、TXT或MD格式的文档
3. 文档会自动向量化并加入知识库
4. 对话时系统会自动检索相关知识

### 技术说明

- **STT引擎**: OpenAI Whisper
- **支持格式**: WebM音频
- **最大文件**: 16MB
- **最小时长**: 0.5秒
- **语言支持**: 自动检测(支持中英文等多语言)
